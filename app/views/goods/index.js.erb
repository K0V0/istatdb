
// goods table
elem = $('#goods').children('tbody');

if (elem.length === 0 /*|| '<%= action_name %>' == 'administration'*/) {
	// if goods table sectione removed from document due item details showup,
	// or if administrative mode enables
	// recreate table
	$('.item_details').remove();
	$('<%= j(render "goods/goodslist/goodslist") %>').appendTo('main');

} else {
	// no need to remove whole section, just replace lines
	elem.children('tr').remove();
	$('<%= j(render "goods/goodslist/item", items: @result) %>').appendTo(elem);
}

$('#total_goods_count').children('b').text('<%= @result.count %>');

// renders manufacturers select field - manufacturers list is selected based on client 
var parent = $('#q_manufacturer_filter').parent();
parent.children().remove();
$('<%= j(render "goods/goodslist/search_select_manufacturer") %>').appendTo(parent)

// updates href on new good button - important to preload form with values 
// from search fields
var new_good_href = $('<%= j(render "layouts/action_add_new", pars: [:ident, :description, :client_filter, :manufacturer_filter]) %>').attr('href');
$('#new_good_from_search').attr('href', new_good_href);

if ('<%= @administrative_mode %>' == 'true') {
	GOODS_ACTIONS.refresh();
}
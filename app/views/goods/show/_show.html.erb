
<% content_for :show_content do %>

	<%= render('layouts/shared/show_item_basic_info',
		fields: [
			[:ident, :description],
			[
				[
					:local_taric,
					kncode: {
						call_decorator: :num_to_kncode,
						is_link: true,
						clipboard_button: true
					}
				],
				[:local_taric, :description]
			],
		]
	) %>

	<%= render('layouts/shared/items_table',

		object: @record.impexpcompanies,

		fields: {
			company_name: {
				#is_link: true
			}
		},

		options: [
			caption: true,
			foot: true,
			html_options: {
				main_class: "shrinked"
			},
			not_editable: true,
			change_on_smallscreen: true
		]

	) %>

	<%= render('layouts/shared/items_table',

		object: @record.manufacturers,

		fields: {
			name: {
				is_link: true
			}
		},

		options: [
			caption: true,
			foot: true,
			html_options: {
				main_class: "shrinked"
			},
			not_editable: true,
			change_on_smallscreen: true
		]

	) %>

	<% if @record.uoms.any? %>

		<%= render('layouts/shared/items_table',
			object: @record.uoms,

			fields: {
				uom: {},
				uom_multiplier: {},
				type: {},
				manufacturer_name: {},
				impexpcompany_name: {}
			},

			options: [
				caption: true,
				head: true,
				foot: true,
				html_options: {
					main_class: "shrinked",
					table_class: "calc_uom_select"
				},
				not_editable: true,
				change_on_smallscreen: true
			]
		) %>

		<%= render('goods/show/uom_input') %>

		<input type="hidden" id="good_id" value="<%= @record.id %>">

	<% end %>

	<%= render('/goods/show/calculator_list') %>

	<% if !@record.uncomplete_reason.blank? %>

		<%= render(
			'/layouts/shared/items_table/note_window',
			caption: t('goods.show_details.uncomplete_reason'),
			content: simple_format(@record.uncomplete_reason, {}, wrapper_tag: :span),
			foot_content: "#{t('items_table.added_by')}: <b>#{@record.user.email}<b>".html_safe,
			not_resolved: @record.uncomplete
		) %>

	<% end %>

	<% if !@record.note.blank? %>

		<%= render(
			'/layouts/shared/items_table/note_window',
			caption: t('activerecord.attributes.good.note'),
			content: simple_format(@record.note, {}, wrapper_tag: :span)
		) %>

	<% end %>

	<% if @record.issues.any? %>

		<%= render('layouts/shared/items_table',
			object: @record.issues,

			fields: {
				name: {
					is_link: true
				}
			},

			options: [
				caption: true,
				foot: true,
				html_options: {
					main_class: "shrinked"
				},
				not_editable: true,
				change_on_smallscreen: true
			]
		) %>

	<% end %>

	<%
		user_that_added = @record.user.blank? ? "---" : @record.user.email
		foot_content = "#{t('items_table.added_by')}: <b>#{user_that_added}</b>"
		if !(mod_id = @record.updated_by).blank?
			foot_content += "<br>#{t('items_table.modded_by')}: <b>#{User.find(mod_id).email}</b>"
		end
	%>
	<%= render(
		'/layouts/shared/items_table/note_window',
		caption: t('goods.about_item.about'),
		content: "
			<b>#{t('goods.about_item.added')}:</b> #{@record.created_at}
			<br><b>#{t('goods.about_item.updated')}:</b> #{@record.updated_at}
			".html_safe,
		foot_content: foot_content.html_safe
	) %>

	<% if @record.good_images.any? %>

		<%= render(
			'/goods/show/images',
			images: @record.good_images
		) %>

		<% content_for :gallery do %>
			<%= render 'layouts/base/galery_viewer' %>
		<% end %>

	<% end %>

<% end %>

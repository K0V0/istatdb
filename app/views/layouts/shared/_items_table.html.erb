<%
cn = controller_name.to_s
%>

<section class="items_table decorated_wrap">

	<table class="items rows_colored with_efects" id="<%= cn %>">

		<% if defined? options %>

			<% if o = options[0][:head] %>

				<thead>

					<% if o.try(:[], :caption) %>
						<tr>
							<th colspan="99">
								<%= @result.model.model_name.human %>
							</th>
						</tr>
					<% end %>

					<tr>
						<%= render('layouts/shared/items_table/head',
							obj: @result.model.name.constantize, 
							fields: fields
						) %>
					</tr>
					
				</thead>

			<% end %>

		<% end %>

		<tbody>
			
			<% @result.each do |item| %>

				<tr>
					
					<%= render('layouts/shared/items_table/field', obj: item, fields: fields) %>

				</tr>

			<% end %>

			<% if defined? errors %>

				<%= items_table_errors_handler(errors[0], @result) %>

			<% end %>

		</tbody>

		<% if defined? options %>

			<% if options[0][:foot] %>

				<tfoot>

					<tr>
						<%= render('layouts/shared/items_table/foot',
							obj: @result, 
							fields: fields
						) %>
					</tr>
					
				</tfoot>

			<% end %>

		<% end %>

	</table>

</section>




<% 
	if defined? assoc
		# if association
		object = assoc
		parent_errs = obj.object.errors["#{object.class.to_s.downcase.pluralize}_attributes"]
	else
		# if straight model
		object = obj.object
		parent_errs = []
	end
%>

<% if (object.errors.any?)||(parent_errs.any?) %>

	<div class="form_errors">

		<% fields.each do |field_name, opts| %>
			<% if object.errors[field_name].any? %>
				<span>
					<%= object.errors[field_name].first %>
				</span>
			<% end %>
		<% end %>

		<% if parent_errs.any? %>
			<% parent_errs.each do |err| %>
				<span>
					  <%= err %>
				</span>
			<% end %>
		<% end %>

	</div>

<% end %>

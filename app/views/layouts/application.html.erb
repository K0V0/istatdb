
<% 
show_flash = !flash.empty? && user_signed_in? 
@body_class += " noscroll" if show_flash
%>

<!DOCTYPE html>
<meta charset="UTF-8">

<html>

	<head>
	  <title>Taric</title>
	  <script type="text/javascript">
  		window.I18n = <%= current_translations.to_json.html_safe %>
	  </script>
	  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
	  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
	  <%= csrf_meta_tags %>
	  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	  <%= favicon_link_tag asset_path('favicon.ico') %>
	</head>

	<body
	<%= "class=\"#{@body_class}\"".html_safe if @body_class %>
	<%= "data-controller_name=#{controller_name}" %>
	<%= "data-controller_name_singular=#{controller_name.singularize}" %>
	<%= "data-action_name=#{action_name}" %>
	>

		<input type="checkbox" id="show_topmenu" role="button" class="hidden">
		<input type="checkbox" id="show_paginator" role="button" class="hidden">
		<input type="checkbox" id="show_searchpanel_opts" role="button" class="hidden" checked="checked">

		<div class="flash_messages <%= show_flash ? 'visible' : '' %>">
			<%= render('layouts/base/flash_messages') if show_flash %>
		</div>

		<span id="tooltip"></span>

		<% if content_for? :mainmenu %>

			<nav class="top_menu">
				<%= yield :mainmenu %>
			</nav>

		<% end %>

		<main>

			<% if content_for? :search_bar %>

				<section class="search_bar">
					<%= yield :search_bar %>
				</section>

			<% end %>

			<% if content_for? :items_table %>

				<article class="index <%= controller_name %> <%= @items_table_class %>">
					<%= yield :items_table %>
				</article>

			<% end %>

			<% if content_for? :show_content %>

				<article class="show <%= controller_name %>">
					<%= yield :show_content %>
				</article>

			<% end %>

			<% if content_for? :login %>

				<%= yield :login %>

			<% end %>

			<%= yield %>

			<%= render 'layouts/base/logo' %>

		</main>

		<% case action_name
			when 'index', 'search', 'administrative', 'end_administrative' %>
				<%#= render 'layouts/base/pagination' %>
				<% if !@result.nil? %>
					<%= paginate(@result, remote: true) %>
				<% end %>
		<% end %>

		<%= render 'layouts/base/footer' %>

	</body>


</html>
